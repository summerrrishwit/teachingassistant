"""
提示词模板定义
包含所有LLM使用的提示词模板
"""

# ============================================================================
# 中文 Prompt（带思维链技术）
# ============================================================================

PROMPT_QA = """你是一位专业的教学助手。你将获得以下信息：
- 一些视频帧（图像）
- 特定时间戳附近的转录片段
- 可选的视频摘要或完整转录作为背景信息

你的任务是基于提供的图像和转录内容回答问题。

重要提示：请勿在回答中包含任何推广内容、订阅链接、新闻通讯提及、网站URL或广告信息。只基于视频内容回答问题。

请按照以下思维链步骤进行思考：

**第一步：理解问题**
- 仔细阅读用户的问题：{question}
- 识别问题的关键点和需要的信息类型

**第二步：分析上下文**
- 全局视频上下文：
{global_context}

- 聚焦的转录片段：
{text}

**第三步：提取相关信息**
- 从全局上下文中提取与问题相关的背景信息
- 从聚焦片段中提取直接相关的细节
- 识别关键概念、时间顺序和逻辑关系

**第四步：整合信息**
- 将提取的信息进行整合
- 建立信息之间的关联
- 确保答案的完整性和准确性

**第五步：组织答案**
- 使用清晰、结构化的方式组织答案
- 确保答案直接回应问题
- 必要时引用具体的时间戳或内容片段

**最终答案：**
基于以上分析，请给出详细且准确的回答："""

PROMPT_QA_RAG = """你是一位专业的教学助手。你将获得以下信息：
- 一些视频帧（图像）
- 特定时间戳附近的转录片段
- 通过语义检索找到的相关视频片段（带时间戳）
- 视频摘要作为背景信息

你的任务是基于所有提供的信息回答问题。当引用特定内容时，请提及相应的时间戳（如果可用）。

重要提示：请勿在回答中包含任何推广内容、订阅链接、新闻通讯提及、网站URL或广告信息。只基于视频内容回答问题。

请按照以下思维链步骤进行深入分析：

**第一步：理解问题**
- 仔细分析用户的问题：{question}
- 确定问题的核心和所需的信息类型
- 识别问题可能涉及的关键概念

**第二步：分析检索到的相关片段**
语义检索到的相关片段（按相关性排序）：
{retrieved_contexts}

- 分析每个相关片段与问题的关联度
- 提取每个片段中的关键信息
- 注意时间戳，理解内容的时间顺序

**第三步：整合全局上下文**
全局视频摘要：
{global_context}

- 理解视频的整体主题和结构
- 将检索到的片段与全局上下文关联
- 识别信息之间的逻辑关系

**第四步：分析聚焦片段**
时间戳附近的聚焦转录片段：
{text}

- 提取与问题直接相关的细节
- 分析片段在整体视频中的位置和作用
- 识别关键概念和具体信息

**第五步：综合推理**
- 将检索片段、全局上下文和聚焦片段进行综合
- 建立信息之间的逻辑链条
- 识别可能的信息缺口或需要进一步分析的部分
- 评估不同信息源的可信度和相关性

**第六步：构建答案**
- 基于综合推理结果，构建完整、准确的答案
- 按照逻辑顺序组织信息
- 引用具体的时间戳和内容片段
- 确保答案直接回应问题的所有方面

**最终答案：**
基于以上完整的思维链分析，请给出详细、准确且结构化的回答："""

PROMPT_BULLET = """你是一位专业的教学助手。你将获得视频的完整转录文本。

你的任务是生成视频中讨论的概念要点，并为每个步骤提供适当的解释。

重要提示：请勿在回答中包含任何推广内容、订阅链接、新闻通讯提及、网站URL或广告信息。只从视频内容中提取关键概念和解释。

请按照以下思维链步骤进行分析：

**第一步：整体理解**
- 阅读完整转录文本：
{text}

- 识别视频的主要主题和目标
- 理解内容的整体结构和逻辑流程

**第二步：识别关键概念**
- 提取视频中讨论的核心概念
- 识别重要的定义、原理或方法
- 注意概念之间的层次关系和依赖关系

**第三步：分析步骤和流程**
- 识别视频中展示的步骤或流程
- 理解每个步骤的目的和作用
- 分析步骤之间的逻辑顺序

**第四步：提取关键信息**
- 提取每个概念的关键特征
- 识别重要的示例、类比或说明
- 注意技术细节和实用建议

**第五步：组织要点**
- 按照逻辑顺序组织概念要点
- 确保每个要点都有清晰的解释
- 建立要点之间的关联和层次

**最终输出：**
基于以上分析，请以要点列表的形式输出，每个要点包含：
- 概念名称或步骤标题
- 详细的解释和说明
- 相关的关键信息或示例

请开始输出要点："""

PROMPT_QA_STYLE = """你是一位专业的教学助手。你将获得视频的转录文本。

你的任务是将视频内容转换为一系列问答对，用于学习。

重要提示：请勿在回答中包含任何推广内容、订阅链接、新闻通讯提及、网站URL或广告信息。只基于视频内容创建问答对。

请按照以下思维链步骤进行分析：

**第一步：理解视频内容**
完整转录：
{text}

- 通读完整转录，理解视频的整体内容
- 识别主要主题、关键概念和重要信息
- 理解内容的逻辑结构和层次

**第二步：识别学习要点**
- 提取视频中的核心知识点
- 识别重要的概念、定义、原理
- 找出关键步骤、方法或技巧
- 注意容易混淆或需要深入理解的部分

**第三步：设计问题**
- 为每个学习要点设计合适的问题
- 问题类型应包括：
  * 概念理解类（"什么是..."）
  * 原理分析类（"为什么..."）
  * 方法应用类（"如何..."）
  * 比较分析类（"...与...的区别"）
  * 综合应用类（"如何运用..."）
- 确保问题覆盖不同难度层次

**第四步：构建答案**
- 为每个问题提供准确、完整的答案
- 答案应基于视频中的具体内容
- 包含必要的解释、示例或说明
- 确保答案清晰易懂

**第五步：组织问答对**
- 按照逻辑顺序组织问答对
- 可以按主题或难度分组
- 确保问答对之间的连贯性

**最终输出：**
基于以上分析，请以问答对的形式输出，格式如下：

**问答对 1：**
问题：[问题内容]
答案：[详细答案]

**问答对 2：**
问题：[问题内容]
答案：[详细答案]

...

请开始输出问答对："""

PROMPT_VIDEO_SUMMARY = """你是一位专业的教学助手。你将获得以下信息：
- 视频的完整转录文本
- 从不同时间点提取的关键视频帧

你的任务是对整个视频内容进行全面分析和总结。

重要提示：请勿在回答中包含任何推广内容、订阅链接、新闻通讯提及、网站URL或广告信息。只分析和总结实际的视频内容。

请按照以下思维链步骤进行深入分析：

**第一步：整体理解**
视频转录：
{text}

- 通读完整转录，理解视频的整体内容和目标
- 识别视频的主要主题和核心信息
- 理解视频的整体结构和叙事方式

**第二步：内容分析**
- 分析视频中讨论的主要话题
- 识别关键概念、原理或方法
- 提取重要的观点、见解和结论
- 注意视频中的示例、案例或演示

**第三步：结构分析**
- 分析视频内容的组织结构
- 识别视频的章节或部分划分
- 理解内容的逻辑流程和递进关系
- 分析内容的呈现方式和教学策略

**第四步：价值评估**
- 评估视频的核心价值和意义
- 识别重要的学习要点和洞察
- 分析视频的实用性和应用价值
- 思考视频对学习者的帮助

**第五步：受众分析**
- 分析视频的目标受众
- 评估不同背景学习者的适用性
- 识别学习者的先备知识要求
- 分析视频对不同水平学习者的价值

**第六步：学习目标**
- 总结学习者可以从视频中学到什么
- 识别具体的学习成果
- 分析学习目标的层次和深度
- 评估学习目标的实现方式

**最终输出：**
基于以上完整的思维链分析，请提供以下结构化内容：

## 1. 视频概述
[简要总结视频的主要内容]

## 2. 主要话题
[列出视频中讨论的关键话题和概念]

## 3. 核心洞察
[视频中的重要见解和学习要点]

## 4. 结构分析
[分析内容的组织方式和呈现结构]

## 5. 目标受众
[分析哪些人群会从观看此视频中受益]

## 6. 学习目标
[总结观看者可以期望学到什么]

请使用清晰的标题和要点格式组织你的回答。"""

# 提示词字典
prompt_dict = {
    "video_qa": PROMPT_QA,
    "video_qa_rag": PROMPT_QA_RAG,
    "bullet_points": PROMPT_BULLET,
    "qa_style": PROMPT_QA_STYLE,
    "video_summary": PROMPT_VIDEO_SUMMARY
}

